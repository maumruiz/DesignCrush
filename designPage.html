<!DOCTYPE html>
<html>
<head>
    <title>Design Page</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/homeStyles.css" />
    <script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js"></script>
</head>
<body>
    <header>
    <!-- Navigation bar -->
    <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navegacion">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="home.html" class="navbar-brand">Diseñazo</a>
            </div>

            <!-- Inicia Menu -->
            <div class="collapse navbar-collapse" id="navegacion">
                <!-- Botones de barra de navegación derecha -->
                <ul id="navRightButtons" class="nav navbar-nav navbar-right">
                    <!-- Login / Register Button -->

                    <!-- User dropdown -->

                    <!-- Shopping Cart -->

                </ul>
                <!-- Search bar -->
                <form action="" class="navbar-form navbar-right" role="search">
                    <div class="form-group">
                        <input id="searchBar" type="text" class="form-control" placeholder="Search">
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <span class="glyphicon glyphicon-search"></span>
                    </button>
                </form> <!-- Search bar -->
            </div> <!-- navbar -->
        </div> <!-- Container -->
    </nav>
    </header>

    <!-- Page Content -->
    <div class="container">

        <!-- Breadcumbs -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Design
                    <small>Info</small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="home.html">Home</a></li>
                    <li class="active">Design Page</li>
                </ol>
            </div> <!-- col-lg-12 -->
        </div> <!-- Row -->

        <!-- Design Row -->
        <div class="row">
            <div class="col-md-6">
                <div id="designImage">
                    <!-- Design -->
                </div>
            </div>

            <div class="col-md-6">
                <div id="designInfo">
                    <div class="well">
                        <form class="form-horizontal">
                          <div class="form-group">
                            <label class="col-sm-4 control-label">Design Name</label>
                            <div class="col-sm-8">
                              <p id="design-name" class="form-control-static"></p>
                            </div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-4 control-label">Autor</label>
                            <div class="col-sm-8">
                              <p id="design-author" class="form-control-static"></p>
                            </div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-4 control-label">Description</label>
                            <div class="col-sm-8">
                              <p id="design-description" class="form-control-static"></p>
                            </div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-4 control-label">Upload Date</label>
                            <div class="col-sm-8">
                              <p id="design-uploadDate" class="form-control-static"></p>
                            </div>
                          </div>
                        </form> <!-- form -->
                    </div> <!-- Well -->
                </div> <!-- designInfo div -->
            </div> <!-- Design info column -->
        </div> <!-- Design row -->

        <!-- nav tab row (Products, Comments, Related) -->
        <div class="row">

            <div class="col-md-6">
            <div class="panel with-nav-tabs panel-info">
                <div class="panel-heading">
                        <ul class="nav nav-tabs nav-justified">
                            <li class="active"><a href="#tab1info" data-toggle="tab">Products</a></li>
                            <li><a href="#tab2info" data-toggle="tab">Related</a></li>
                        </ul>
                </div> <!-- Panel Heading -->

                <div class="panel-body">
                    <div class="tab-content">
                        <div class="tab-pane fade in active" id="tab1info">
                            <!-- Clothing Row -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="page-header">Clothing</h3>
                                </div>

                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/tshirt.png" alt="t-shirt">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6" class="img-product-frame">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/vneck.png" alt="v-neck">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/longsleeve.png" alt="long sleeve">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/hoodie.png" alt="hoodie">
                                    </a>
                                    </div>
                                </div>
                            </div> <!-- /.row -->

                            <!-- Wall-art Row -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="page-header">Wall-art</h3>
                                </div>

                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/poster.jpg" alt="poster">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/artprint.jpg" alt="art print">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/framedart.png" alt="framed print">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/canvas.jpg" alt="canvas print">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/metal.jpg" alt="metal print">
                                    </a>
                                    </div>
                                </div>

                            </div> <!-- /.row -->

                            <!-- Cases Row -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="page-header">Cases</h3>
                                </div>

                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/iphonecase.jpg" alt="iphone case">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/samsungcase.jpg" alt="samsung case">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/ipadcase.jpg" alt="ipad case">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/laptopskin.jpg" alt="laptop skin">
                                    </a>
                                    </div>
                                </div>
                            </div> <!-- /.row -->

                            <!-- Clothing Row -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="page-header">Stationery</h3>
                                </div>

                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/sticker.png" alt="sticker">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/notebook.jpg" alt="notebook">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/hardcoverjournal.png" alt="hardcover journal">
                                    </a>
                                    </div>
                                </div>
                            </div> <!-- /.row -->

                            <!-- Home Row -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="page-header">Home Decor</h3>
                                </div>

                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/cup.png" alt="cup">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/thermo.png" alt="thermo">
                                    </a>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-xs-6">
                                    <div class="img-product-frame">
                                    <a href="productPage.html">
                                        <img class="img-responsive img-hover img-product" src="img/products/popcornbowl.png" alt="popcorn bowl">
                                    </a>
                                    </div>
                                </div>
                            </div> <!-- /.row -->
                        </div> <!-- tab pane -->

                        <div class="tab-pane fade" id="tab2info">
                            Related
                        </div>

                    </div> <!-- div tab-content -->
                </div> <!-- div panel-body -->
            </div> <!-- div panel -->
            </div>

            <!-- Comments -->
            <div class="col-md-6">
                <div class="well">
                    <h3 style="text-align: center"><strong>Design commments</strong></h3>
                    <hr>
                    <form role="form">
                        <div class="form-group">
                            <textarea id="commentTextarea" class="form-control" rows="5" maxlength="500" placeholder="Leave a comment"></textarea>
                        </div>
                        <button type="button" class="btn btn-danger pull-right" id="addCommentButton">Add Comment</button>
                    </form>
                    <br><hr>
                    <div id="commentsSection">

                    </div><!-- Comments section -->
                </div> <!-- well -->
            </div> <!-- col-md-6 -->
        </div> <!-- row -->

    </div> <!-- Main Container -->

</body>
<script src="js/navButtons.js"></script>
<script type="text/javascript">
    $(document).on('ready',function() {

        // Setting the action to get design info from session
        $.ajax({
            type: 'POST',
            url: 'data/applicationLayer.php',
            dataType: 'json',
            data: {'action':'DESIGN'},
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            success: function(jsonData) {
                var designImage = '<a href="#" class="thumbnail">' +
                    '<img src="img/designs/' + jsonData.data[0].designId + '" alt="..."></a>';

                var designInfo = '<div class="well">' +
                    '<h3> Design Name:   ' + jsonData.data[0].designName + '</h3>' +
                    '<p> Description: ' + jsonData.data[0].description + '</p>' +
                    '<h4> Author: ' + jsonData.data[0].userName + '</h4>' +
                    '<p> Upload Date: ' + jsonData.data[0].uploadDate + '</p></div>';

                $("#designImage").html(designImage);
                $("#design-name").html(jsonData.data[0].designName);
                $("#design-author").html(jsonData.data[0].userName);
                $("#design-description").html(jsonData.data[0].description);
                $("#design-uploadDate").html(jsonData.data[0].uploadDate);
            },
            error: function(errorMsg){
                console.log(errorMsg);
            }
        });

        // Setting the action to get the comments made to the design
        $.ajax({
            type: 'POST',
            url: 'data/applicationLayer.php',
            dataType: 'json',
            data: {'action':'GET_COMMENT'},
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            success: function(jsonData) {
                var commentCode = "";
                var name = "";

                for(i = 0; i < jsonData.data.length; i++) {
                    name = jsonData.data[i].fName +' '+ jsonData.data[i].lName;
                    commentCode += '<div class="media">' +
                        '<a class="pull-left" href="#">' +
                            '<img class="media-object" alt="64x64" src="img/admin/user.png"></a>' +
                        '<div class="media-body">' +
                            '<h5 class="media-heading"><strong>' + name + '</strong></h5>' + jsonData.data[i].comment + '</div></div>';
                }

                $("#commentsSection").html(commentCode);
            },
            error: function(errorMsg){
                alert("You need to be logged to comment!");
            }
        });

        // Setting the action to add a comment to the design
        $('#addCommentButton').on('click', function(){
            var comment = $("#commentTextarea").val();
            var commentCode = "";

            $.ajax({
                type: 'POST',
                url: 'data/applicationLayer.php',
                dataType: 'json',
                data: {'action':'COMMENT', 'comment':comment},
                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                success: function(jsonData) {
                    var name = jsonData.firstName +' '+ jsonData.lastName;

                    commentCode = '<div class="media">' +
                        '<a class="pull-left" href="#">' +
                            '<img class="media-object" alt="64x64" src="img/admin/user.png"></a>' +
                        '<div class="media-body">' +
                            '<h5 class="media-heading"><strong>' + name + '</strong></h5>' + comment + '</div></div>';

                    $("#commentsSection").prepend(commentCode);
                    $("#commentTextarea").val("");
                },
                error: function(errorMsg){
                    alert("You need to be logged to comment!");
                }
            });
        });

        // Setting the action for choosing a product
        $("#tab1info").on('click','a',function(){
            var productName = $(this).children("img").attr("alt");

            $.ajax({
                type: 'POST',
                url: 'data/applicationLayer.php',
                dataType: 'json',
                data: {'action':'SET_PRODUCT', 'productName':productName},
                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                success: function(jsonData) {
                    console.log(jsonData);
                },
                error: function(errorMsg){
                    console.log(errorMsg.statusText);
                }
            });
        });

    });
</script>

</html>
